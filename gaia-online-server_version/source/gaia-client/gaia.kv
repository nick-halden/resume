#:kivy 1.11.1
#: import NoTransition kivy.uix.screenmanager.NoTransition
#: import math math
#: import c constants



# Here the Windows start

WindowManager:
    transition: NoTransition()
    on_current:
        self.screen_changed()
    LoginScreen:
    WaitingScreen:
    SetupWindow:
    MapSetupWindow:
    FactionSetupWindow:
    BoardWindow: 
    MapWindow:
    ResearchBoardWindow:
    OthersWindow:
    NetworkWindow:
    

<BoardWindow>:
    name: 'board'
    RelativeLayout:
        id: window_layout
        size_hint: (None, None)
        size: root.width, root.height
        pos: (0,0)
        canvas.before:
            Rectangle:
                size: self.size
                texture: app.galaxy_texture

        GridLayout:
            cols: 5
            size_hint_y: None
            y: 40
            row_default_height: 40
            row_force_default: True
            pos_hint:{'top': 1, 'center_x': 0.5}

            Button:
                text: 'Mein Brett'
                on_release: app.root.current = 'board'          
            Button:
                text: 'Karte'
                on_release: app.root.current = 'map'
            Button:
                text: 'Forschung & Ziele'
                on_release: app.root.current = 'research_board'
            Button:
                text: 'Andere Spieler'
                on_release: app.root.current = 'others'
            Button:
                text: 'Netzwerk'
                on_release: app.root.current = 'network'
                size_hint_max_x: 160
        Board:
            id: board
            size_hint: (1, 1 - (40/self.parent.size[1]))
            pos_hint: {'x': 0, 'y': 0}

        RelativeLayout:
            size_hint: (1, 1 - (40/self.parent.size[1]))
            pos_hint: {'x': 0, 'y': 0}        
            Label:
                id: pat_label
                pos_hint: {'right': 0.85, 'top': 1}
                size_hint: (None, None)
                size: (200, 40)
                font_size: 20
                bold: True
                valign: 'center'
                halign: 'right'

        
        
                    

        
        

<MapWindow>:
    name: 'map'
    RelativeLayout:
        size: root.width, root.height
        canvas.before:
            Rectangle:
                size: self.size
                texture: app.galaxy_texture

        GridLayout:
            cols: 5
            size_hint_y: None
            y: 40
            row_default_height: 40
            row_force_default: True
            pos_hint:{'top': 1, 'center_x': 0.5}

            Button:
                text: 'Mein Brett'                
                on_release: app.root.current = 'board'               
            Button:
                text: 'Karte'
                on_release: app.root.current = 'map'
            Button:
                text: 'Forschung & Ziele'
                on_release: app.root.current = 'research_board'
            Button:
                text: 'Andere Spieler'
                on_release: app.root.current = 'others'
            Button:
                text: 'Netzwerk'
                on_release: app.root.current = 'network'
                size_hint_max_x: 160
        RelativeLayout:
            size_hint: (None, None)
            size: ((self.parent.size[1]- 40) *2478/1899, self.parent.size[1] - 40)
            pos_hint: {'center_x': 0.5} 
            Background:
                id: BackgroundMap
                source: f'{c.ASSETS_PATH}/galaxy.png'
                allow_stretch: True
                size: self.parent.size
                offset: [self.center_x - self.norm_image_size[0]/2, self.center_y - self.norm_image_size[1]/2]
                magnification: self.norm_image_size[0] / self.texture_size[0]  # Find out the factor by which the image is magnified/shrunk from its 'default' value.         
                on_touch_up: root.my_touch_up(args[1].pos)

                RelativeLayout:
                    pos: self.parent.offset
                    size: self.parent.norm_image_size
                    id: MapLayout

                    SectorImage:
                        id: bottomrightsector
                        source: f'{c.ASSETS_PATH}/sectors/7.png'
                        pos_hint: {'x': 18/30.5, 'y': 0/13.5}          
                    SectorImage:
                        id: midrightsector
                        source: f'{c.ASSETS_PATH}/sectors/6.png'
                        pos_hint: {'x': 22.5/30.5, 'y': 3.5/13.5}    
                    SectorImage:
                        id: toprightsector
                        source: f'{c.ASSETS_PATH}/sectors/5.png'
                        pos_hint: {'x': 19.5/30.5, 'y': 7.5/13.5}  
                    SectorImage:
                        id: topmidsector
                        source: f'{c.ASSETS_PATH}/sectors/1.png'
                        pos_hint: {'x': 12/30.5, 'y': 8/13.5}
                    SectorImage:
                        id: midrightmidsector
                        source: f'{c.ASSETS_PATH}/sectors/3.png'
                        pos_hint: {'x': 15/30.5, 'y': 4/13.5}   
                    SectorImage:
                        id: bottommidsector
                        source: f'{c.ASSETS_PATH}/sectors/4.png'
                        pos_hint: {'x': 10.5/30.5, 'y': 0.5/13.5}                
                    SectorImage:
                        id: midleftmidsector
                        source: f'{c.ASSETS_PATH}/sectors/2.png'
                        pos_hint: {'x': 7.5/30.5, 'y': 4.5/13.5} 
                    SectorImage:
                        id: topleftsector
                        source: f'{c.ASSETS_PATH}/sectors/10.png'
                        pos_hint: {'x': 4.5/30.5, 'y': 0.6296} 
                    SectorImage:
                        id: midleftsector
                        source: f'{c.ASSETS_PATH}/sectors/9.png'
                        pos_hint: {'x': 0, 'y': 5/13.5}
                    SectorImage:
                        id: bottomleftsector
                        source: f'{c.ASSETS_PATH}/sectors/8.png'
                        pos_hint: {'x': 3/30.5, 'y': 1/13.5}
                    RelativeLayout:
                        id: TempSatsLayout
                        size_hint: (1,1)
            GridLayout:
                pos_hint: {'left': 1, 'top': 1}
                size_hint: (None, None)
                size: (104, 135)
                cols: 1
                spacing: 5
                Image:
                    id: fed_img
                    source: f'{c.ASSETS_PATH}/fed_img.png'
                    size_hint: (None, None)
                    size: (104, 93)
                    allow_stretch: True
                Button:
                    id: fed_button
                    size_hint: (None, None)
                    size: (104, 32)
                    text: u'Gr\u00FCnden'
                    disabled: True
                    on_release: root.fed_button_pressed() 
        RelativeLayout:
            size_hint: (1, 1 - (40/self.parent.size[1]))
            pos_hint: {'x': 0, 'y': 0}    
            Label:
                id: pat_label
                pos_hint: {'right': 0.85, 'top': 1}
                size_hint: (None, None)
                size: (200, 40)
                font_size: 20
                bold: True
                valign: 'center'
                halign: 'right'


<ResearchBoardWindow>:
    name: 'research_board'
    RelativeLayout:
        cols: 1
        size: root.width, root.height
        canvas.before:
            Rectangle:
                size: self.size
                texture: app.galaxy_texture
        GridLayout:
            cols: 5
            size_hint_y: None
            y: 40
            row_default_height: 40
            row_force_default: True
            pos_hint:{'top': 1, 'center_x': 0.5}

            Button:
                text: 'Mein Brett'
                on_release: app.root.current = 'board'   
            Button:
                text: 'Karte'
                on_release: app.root.current = 'map'
            Button:
                text: 'Forschung & Ziele'
                on_release: app.root.current = 'research_board'
            Button:
                text: 'Andere Spieler'
                on_release: app.root.current = 'others'
            Button:
                text: 'Netzwerk'
                on_release: app.root.current = 'network'
                size_hint_max_x: 160

        RelativeLayout:
            size_hint: (None, None)
            size: self.parent.size[0], (self.parent.size[1] - 40) 
            pos_hint: {'x': 0, 'y': 0}         
            RelativeLayout:
                size_hint: (None, None)
                size: (self.parent.size[0] * 0.5, self.parent.size[1])
                pos_hint: {'left': 1, 'center_y': 0.5}
                Background:
                    id: ResearchBackground
                    source: f'{c.ASSETS_PATH}/researchboard.png'
                    allow_stretch: True
                    size: self.parent.size
                    offset: [self.center_x - self.norm_image_size[0]/2, self.center_y - self.norm_image_size[1]/2]
                    magnification: self.norm_image_size[0] / self.texture_size[0]  # Find out the factor by which the image is magnified/shrunk from its 'default' value.

                    RelativeLayout:
                        pos: self.parent.offset
                        size: self.parent.norm_image_size
                        id: research_board
                        
                        # Public Actions:
                        HoverButton:
                            id: pub2knw3
                            action_type: c.PUB_2_KNW_3
                            on_release: root.action(self.action_type)
                            size_hint: 138/1579, 211/1657
                            pos_hint: {'x': 25/1579, 'y': 11/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        Image:
                            id:pub2knw3_oct
                            source: f'{c.ASSETS_PATH}/empty.png'
                            size_hint: 113/1579, 107/1657
                            pos_hint: {'x': 39/1579, 'y': 27/1687}
                            allow_stretch: True
                        HoverButton:
                            id: pub2trf2
                            action_type: c.PUB_2_TRF_2
                            on_release: root.action(self.action_type)
                            size_hint: 138/1579, 211/1657
                            pos_hint: {'x': 163/1579, 'y': 11/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        Image:
                            id:pub2trf2_oct
                            source: f'{c.ASSETS_PATH}/empty.png'
                            size_hint: 113/1579, 107/1657
                            pos_hint: {'x': 177/1579, 'y': 27/1687}
                            allow_stretch: True
                        HoverButton:
                            id: pub2ore
                            action_type: c.PUB_2_ORE
                            on_release: root.action(self.action_type)
                            size_hint: 138/1579, 211/1657
                            pos_hint: {'x': 301/1579, 'y': 11/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        Image:
                            id:pub2ore_oct
                            source: f'{c.ASSETS_PATH}/empty.png'
                            size_hint: 113/1579, 107/1657
                            pos_hint: {'x': 317/1579, 'y': 27/1687}
                            allow_stretch: True
                        HoverButton:
                            id: pub2gld
                            action_type: c.PUB_2_GLD
                            on_release: root.action(self.action_type)
                            size_hint: 138/1579, 211/1657
                            pos_hint: {'x': 439/1579, 'y': 11/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        Image:
                            id:pub2gld_oct
                            source: f'{c.ASSETS_PATH}/empty.png'
                            size_hint: 113/1579, 107/1657
                            pos_hint: {'x': 454/1579, 'y': 27/1687}
                            allow_stretch: True
                        HoverButton:
                            id: pub2knw2
                            action_type: c.PUB_2_KNW_2
                            on_release: root.action(self.action_type)
                            size_hint: 138/1579, 211/1657
                            pos_hint: {'x': 577/1579, 'y': 11/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        Image:
                            id:pub2knw2_oct
                            source: f'{c.ASSETS_PATH}/empty.png'
                            size_hint: 113/1579, 107/1657
                            pos_hint: {'x': 594/1579, 'y': 27/1687}
                            allow_stretch: True
                        HoverButton:
                            id: pub2trf1
                            action_type: c.PUB_2_TRF_1
                            on_release: root.action(self.action_type)
                            size_hint: 138/1579, 211/1657
                            pos_hint: {'x': 715/1579, 'y': 11/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        Image:
                            id:pub2trf1_oct
                            source: f'{c.ASSETS_PATH}/empty.png'
                            size_hint: 113/1579, 107/1657
                            pos_hint: {'x': 732/1579, 'y': 27/1687}
                            allow_stretch: True
                        HoverButton:
                            id: pub2pws
                            action_type: c.PUB_2_PWS
                            on_release: root.action(self.action_type)
                            size_hint: 138/1579, 211/1657
                            pos_hint: {'x': 853/1579, 'y': 11/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        Image:
                            id:pub2pws_oct
                            source: f'{c.ASSETS_PATH}/empty.png'
                            size_hint: 113/1579, 107/1657
                            pos_hint: {'x': 871/1579, 'y': 27/1687}
                            allow_stretch: True
                        HoverButton:
                            id: qic2tec
                            action_type: c.QIC_2_TEC
                            on_release: root.action(self.action_type)
                            size_hint: 183/1579, 211/1657
                            pos_hint: {'x': 992/1579, 'y': 11/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        Image:
                            id:qic2tec_oct
                            source: f'{c.ASSETS_PATH}/empty.png'
                            size_hint: 139/1579, 131/1657
                            pos_hint: {'x': 1019/1579, 'y': 27/1687}
                            allow_stretch: True
                        HoverButton:
                            id: qic2fed
                            action_type: c.QIC_2_FED
                            on_release: root.action(self.action_type)
                            size_hint: 183/1579, 211/1657
                            pos_hint: {'x': 1175/1579, 'y': 11/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        Image:
                            id:qic2fed_oct
                            source: f'{c.ASSETS_PATH}/empty.png'
                            size_hint: 139/1579, 131/1657
                            pos_hint: {'x': 1203/1579, 'y': 27/1687}
                            allow_stretch: True
                        HoverButton:
                            id: qic2vps
                            action_type: c.QIC_2_VPS
                            on_release: root.action(self.action_type)
                            size_hint: 183/1579, 211/1657
                            pos_hint: {'x': 1358/1579, 'y': 11/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        Image:
                            id:qic2vps_oct
                            source: f'{c.ASSETS_PATH}/empty.png'
                            size_hint: 139/1579, 131/1657
                            pos_hint: {'x': 1389/1579, 'y': 27/1687}
                            allow_stretch: True
                        # Research Tracks:
                        HoverButton:
                            id: track1
                            action_type: c.TRACK_1
                            on_release: root.choose_lvlup(self.action_type)
                            size_hint: 257/1579, 395/1657
                            pos_hint: {'x': 11/1579, 'y': 690/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: track2
                            action_type: c.TRACK_2
                            on_release: root.choose_lvlup(self.action_type)
                            size_hint: 257/1579, 395/1657
                            pos_hint: {'x': 268/1579, 'y': 690/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: track3
                            action_type: c.TRACK_3
                            on_release: root.choose_lvlup(self.action_type)
                            size_hint: 257/1579, 395/1657
                            pos_hint: {'x': 525/1579, 'y': 690/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: track4
                            action_type: c.TRACK_4
                            on_release: root.choose_lvlup(self.action_type)
                            size_hint: 257/1579, 395/1657
                            pos_hint: {'x': 783/1579, 'y': 690/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: track5
                            action_type: c.TRACK_5
                            on_release: root.choose_lvlup(self.action_type)
                            size_hint: 257/1579, 395/1657
                            pos_hint: {'x': 1040/1579, 'y': 690/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: track6
                            action_type: c.TRACK_6
                            on_release: root.choose_lvlup(self.action_type)
                            size_hint: 257/1579, 395/1657
                            pos_hint: {'x': 1297/1579, 'y': 690/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        # Advanced tech tiles:                        
                        RelativeLayout:
                            id: adv_layout
                            size_hint: (1,1)
                        HoverButton:
                            id: adv_tech1
                            action_type: c.ADV_TECH_1
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 205/1579, 169/1657
                            pos_hint: {'x': 49/1579, 'y': 1386/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: adv_tech2
                            action_type: c.ADV_TECH_2
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 205/1579, 169/1657
                            pos_hint: {'x': 306/1579, 'y': 1386/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: adv_tech3
                            action_type: c.ADV_TECH_3
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 205/1579, 169/1657
                            pos_hint: {'x': 563/1579, 'y': 1386/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: adv_tech4
                            action_type: c.ADV_TECH_4
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 205/1579, 169/1657
                            pos_hint: {'x': 821/1579, 'y': 1386/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: adv_tech5
                            action_type: c.ADV_TECH_5
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 205/1579, 169/1657
                            pos_hint: {'x': 1078/1579, 'y': 1386/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: adv_tech6
                            action_type: c.ADV_TECH_6
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 205/1579, 169/1657
                            pos_hint: {'x': 1335/1579, 'y': 1386/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        # fed marker on lvl 5 terraforming
                        Image:
                            id: tf_fedm
                            source: f'{c.ASSETS_PATH}/empty.png'
                            size_hint: 91/1579, 111/1657
                            pos_hint: {'x': 99/1579, 'y': 1559/1687}
                            allow_stretch: True
                        # Tech tiles upper row:
                        HoverButton:
                            id: tech1
                            action_type: c.TECH_1
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 257/1579, 195/1657
                            pos_hint: {'x': 11/1579, 'y': 477/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: tech2
                            action_type: c.TECH_2
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 257/1579, 195/1657
                            pos_hint: {'x': 268/1579, 'y': 477/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: tech3
                            action_type: c.TECH_3
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 257/1579, 195/1657
                            pos_hint: {'x': 525/1579, 'y': 477/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: tech4
                            action_type: c.TECH_4
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 257/1579, 195/1657
                            pos_hint: {'x': 783/1579, 'y': 477/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: tech5
                            action_type: c.TECH_5
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 257/1579, 195/1657
                            pos_hint: {'x': 1040/1579, 'y': 477/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: tech6
                            action_type: c.TECH_6
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 257/1579, 195/1657
                            pos_hint: {'x': 1297/1579, 'y': 477/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        # Tech tiles lower row:
                        HoverButton:
                            id: tech7
                            action_type: c.TECH_7
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 323/1579, 218/1657
                            pos_hint: {'x': 83/1579, 'y': 237/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: tech8
                            action_type: c.TECH_8
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 323/1579, 218/1657
                            pos_hint: {'x': 600/1579, 'y': 237/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        HoverButton:
                            id: tech9
                            action_type: c.TECH_9
                            on_release: root.choose_tech(self.action_type)
                            size_hint: 323/1579, 218/1657
                            pos_hint: {'x': 1094/1579, 'y': 237/1687}
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                        RelativeLayout:
                            id: research_markers
                            size_hint: 1516/1579, 955/1657
                            pos_hint: {'x': 22/1579, 'y': 719/1687}
                   
            RelativeLayout:
                size_hint: (None, None)
                size: (self.parent.size[0] * 0.5, self.parent.size[1])
                pos_hint: {'right': 1, 'center_y': 0.5}              
                Background:
                    id: GoalsBackground
                    source: f'{c.ASSETS_PATH}/goals_board.png'
                    allow_stretch: True
                    pos_hint: {'x': 0, 'y': 0}
                    size: self.parent.size
                    offset: [self.center_x - self.norm_image_size[0]/2, self.center_y - self.norm_image_size[1]/2]
                    magnification: self.norm_image_size[0] / self.texture_size[0]  # Find out the factor by which the image is magnified/shrunk from its 'default' value.
                    
                    RelativeLayout:
                        id: goals_layout
                        pos: self.parent.offset
                        size: self.parent.norm_image_size
                        RelativeLayout:
                            id: fin_score_layout
                            pos_hint: {'x': 0, 'y': 0}
                            size: self.parent.size
                        Image:
                            id: round_1
                            pos_hint: {'x': 373/2140, 'y':1004/2130}
                            size_hint: (383/2140, 439/2130)
                            source: f'{c.ASSETS_PATH}/empty.png'
                            allow_stretch: True
                            canvas.before:
                                PushMatrix
                                Rotate
                                    angle: 75
                                    origin: self.center
                            canvas.after:
                                PopMatrix
                        Image:
                            id: round_2
                            pos_hint: {'x': 508/2140, 'y':1239/2130}
                            size_hint: (383/2140, 439/2130)
                            source: f'{c.ASSETS_PATH}/empty.png'
                            allow_stretch: True
                            canvas.before:
                                PushMatrix
                                Rotate
                                    angle: 45
                                    origin: self.center
                            canvas.after:
                                PopMatrix
                        Image:
                            id: round_3
                            pos_hint: {'x': 743/2140, 'y':1372/2130}
                            size_hint: (383/2140, 439/2130)
                            source: f'{c.ASSETS_PATH}/empty.png'
                            allow_stretch: True
                            canvas.before:
                                PushMatrix
                                Rotate
                                    angle: 15
                                    origin: self.center
                            canvas.after:
                                PopMatrix
                        Image:
                            id: round_4
                            pos_hint: {'x': 1016/2140, 'y':1372/2130}
                            size_hint: (383/2140, 439/2130)
                            source: f'{c.ASSETS_PATH}/empty.png'
                            allow_stretch: True
                            canvas.before:
                                PushMatrix
                                Rotate
                                    angle: -15
                                    origin: self.center
                            canvas.after:
                                PopMatrix
                        Image:
                            id: round_5
                            pos_hint: {'x': 1249/2140, 'y':1235/2130}
                            size_hint: (383/2140, 439/2130)
                            source: f'{c.ASSETS_PATH}/empty.png'
                            allow_stretch: True
                            canvas.before:
                                PushMatrix
                                Rotate
                                    angle: -45
                                    origin: self.center
                            canvas.after:
                                PopMatrix
                        Image:
                            id: round_6
                            pos_hint: {'x': 1384/2140, 'y':1001/2130}
                            size_hint: (383/2140, 439/2130)
                            source: f'{c.ASSETS_PATH}/empty.png'
                            allow_stretch: True
                            canvas.before:
                                PushMatrix
                                Rotate
                                    angle: -75
                                    origin: self.center
                            canvas.after:
                                PopMatrix
                        Image:
                            id: fin_1
                            pos_hint: {'x': 1247/2140, 'y':398/2130}
                            size_hint: (412/2140, 273/2130)
                            source: f'{c.ASSETS_PATH}/empty.png'
                            allow_stretch: True                            
                        Image:
                            id: fin_2
                            pos_hint: {'x': 1247/2140, 'y':794/2130}
                            size_hint: (412/2140, 273/2130)
                            source: f'{c.ASSETS_PATH}/empty.png'
                            allow_stretch: True
                        RelativeLayout:
                            id: end_layout
                            pos_hint: {'x': 0, 'y': (1090/2130)}
                            size_hint: (0,0)
                            canvas:
                                Rectangle:
                                    size: self.size
                                    texture: app.galaxy_texture           
                            
            GridLayout:
                id: vcp_layout
                pos_hint: {'x': 0.5, 'top': 1}
                size_hint: (None, None)
                size: (320, 320)
                cols: 1
                RelativeLayout:
                    size_hint: (None, None)
                    size: (320, 40)
                    Image:
                        source: f'{c.ASSETS_PATH}/vps.jpg'
                        size_hint: (0.5, 1)
                        pos_hint: {'x': 0, 'center_y': 0.5}
                    Label:
                        size_hint: (None, None)
                        size: (110, 30)
                        pos_hint: {'x': 50/320, 'center_y': 0.5}
                        font_size: 20
                        bold: True
                        text: 'Siegpunkte:'                        
                StackLayout: 
                    size_hint: (None, None)              
                    size: (320, 280)
                    id: vcp_score
                    orientation: 'tb-lr'
                    spacing: 2  
            Label:
                id: pat_label
                pos_hint: {'right': 0.85, 'top': 1}
                size_hint: (None, None)
                size: (200, 40)
                font_size: 20
                bold: True
                valign: 'center'
                halign: 'right'                                    
                                  


<OthersWindow>:
    name: 'others'
    RelativeLayout:
        id: others_layout
        size: root.width, root.height
        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                texture: app.galaxy_texture        
        GridLayout:
            cols: 5
            size_hint_y: None
            y: 40
            row_default_height: 40
            row_force_default: True
            pos_hint:{'top': 1, 'center_x': 0.5}

            Button:
                text: 'Mein Brett'
                on_release: app.root.current = 'board'             
            Button:
                text: 'Karte'
                on_release: app.root.current = 'map'
            Button:
                text: 'Forschung & Ziele'
                on_release: app.root.current = 'research_board'
            Button:
                text: 'Andere Spieler'
                on_release: app.root.current = 'others'
            Button:
                text: 'Netzwerk'
                on_release: app.root.current = 'network'
                size_hint_max_x: 160
        GridLayout:
            id: other_boards
            size_hint: (1, 1 - (40/self.parent.size[1]))
            pos_hint: {'x': 0, 'y': 0}
            cols: 2
            on_touch_up: root.my_touch_up(args[1].pos)

<NetworkWindow>:
    name: 'network'
    RelativeLayout:
        size: root.width, root.height
        canvas.before:
            Rectangle:
                size: self.size
                texture: app.galaxy_texture

        GridLayout:
            cols: 5
            size_hint_y: None
            y: 40
            row_default_height: 40
            row_force_default: True
            pos_hint:{'top': 1, 'center_x': 0.5}

            Button:
                text: 'Mein Brett'
                on_release: app.root.current = 'board'    
            Button:
                text: 'Karte'
                on_release: app.root.current = 'map'
            Button:
                text: 'Forschung & Ziele'
                on_release: app.root.current = 'research_board'
            Button:
                text: 'Andere Spieler'
                on_release: app.root.current = 'others'
            Button:
                text: 'Netzwerk'
                on_release: app.root.current = 'network'
                size_hint_max_x: 160
        GridLayout:
            cols: 1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: (None, None)
            size: (400,400)
            row_default_height: 40
            row_force_default: True
            spacing: 10
            Label:
                text: 'Einstellungen:'
                font_size: 20
                bold: True
            RelativeLayout:                    
                GridLayout:
                    cols: 2
                    col_default_width: 40
                    cols_minimum: {1: 200}
                    size_hint: (None, None)
                    size: (340,40)
                    spacing: 0
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    RelativeLayout:
                        MyToggleButton:
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                            on_state: root.toggle_popups(self.state)
                            size_hint: (None, None)
                            size: (35, 35)
                    Label:
                        text: 'Weniger Popups (Konstantin-Modus)'
                        halign: 'left'
            RelativeLayout:  
                Button:
                    id: popup_btn
                    size_hint: (None, None)
                    size: (170, 40)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    text: u'Letztes Popup anzeigen'
                    on_release: root.show_current_popup() 
            Label:
                text: 'Netzwerkprobleme beheben:'
                font_size: 20
                bold: True
            RelativeLayout:            
                Button:
                    id: sync_btn
                    size_hint: (None, None)
                    size: (170, 40)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    text: 'Synchronisieren'
                    on_release: root.sync_with_server()
            RelativeLayout:  
                Button:
                    id: undo_btn
                    size_hint: (None, None)
                    size: (170, 40)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    text: u'R\u00FCckg\u00E4ngig'
                    on_release: root.request_undo()   
            RelativeLayout:  
                Button:
                    id: save_btn
                    size_hint: (None, None)
                    size: (170, 40)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    text: 'exportiere Spielstand'
                    on_release: root.export_game_state()              
        

<FactionSetupWindow>:
    name: 'faction_setup'
    RelativeLayout:
        size: root.size
        Background:
            id: Background
            source: f'{c.ASSETS_PATH}/back_of_map.png'
            allow_stretch: True
            size: self.parent.size
            offset: [self.center_x - self.norm_image_size[0]/2, self.center_y - self.norm_image_size[1]/2]
            magnification: self.norm_image_size[0] / self.texture_size[0]  # Find out the factor by which the image is magnified/shrunk from its 'default' value.       

            RelativeLayout:
                id: fac_layout
                pos: self.parent.offset
                size: self.parent.norm_image_size           
                
                FactionButton:
                    id: Firaks
                    size_hint: 0.16, 0.23
                    pos_hint: {'x': 0, 'y': 0.07}
                    faction: c.FIRAKS
                    
                FactionButton:
                    id: Ambas
                    size_hint: 0.16, 0.27
                    pos_hint: {'x': 0.17, 'y': 0.07}
                    faction: c.AMBAS
                    
                FactionButton:
                    id: Taklons
                    size_hint: 0.14, 0.27
                    pos_hint: {'x': 0.34, 'y': 0.07}
                    faction: c.TAKLONS
                    
                FactionButton:
                    id: Gleen
                    size_hint: 0.18, 0.15
                    pos_hint: {'x': 0.49, 'y': 0.22}
                    faction: c.GLEEN
                    text_size: self.size[0] * 0.8, self.size[1] * 2       
                    
                FactionButton:
                    id: Xenos
                    size_hint: 0.16, 0.2
                    pos_hint: {'x': 0.6, 'y': 0}
                    faction: c.XENOS
                    valign: 'bottom'
                    text_size: self.size[0], self.size[1] * 0.7
                    
                FactionButton:
                    id: Geoden
                    size_hint: 0.17, 0.15
                    pos_hint: {'x': 0.68, 'y': 0.22}
                    faction: c.GEODEN
                    text_size: self.size[0]* 0.8, self.size[1] * 2    

                FactionButton:
                    id: BalTak
                    size_hint: 0.14, 0.3
                    pos_hint: {'x': 0.86, 'y': 0.03}
                    faction: c.BAL_TAK
                    valgin: 'top'
                    text_size: self.size[0], self.size[1] *0.5  
                    
                FactionButton:
                    id: MadAndroids
                    size_hint: 0.14, 0.22
                    pos_hint: {'x': 0, 'y': 0.32}
                    faction: c.MAD_ANDROIDS
                    halign: 'right'
                    
                FactionButton:
                    id: Itar
                    size_hint: 0.12, 0.26
                    pos_hint: {'x': 0.15, 'y': 0.36}
                    faction: c.ITAR
                    
                FactionButton:
                    id: Nevla
                    size_hint: 0.1, 0.25
                    pos_hint: {'x': 0.28, 'y': 0.35}
                    faction: c.NEVLA
                    
                FactionButton:
                    id: Terraner
                    size_hint: 0.12, 0.27
                    pos_hint: {'x': 0.39, 'y': 0.4}
                    faction: c.TERRANER
                    
                FactionButton:
                    id: Lantida
                    size_hint: 0.13, 0.28
                    pos_hint: {'x': 0.52, 'y': 0.39}
                    faction: c.LANTIDA
                    
                FactionButton:
                    id: DerSchwarm
                    size_hint: 0.16, 0.22
                    pos_hint: {'x': 0.66, 'y': 0.38}
                    faction: c.DER_SCHWARM
                    halign: 'left'
                    
                FactionButton:
                    id: HadschHalla                
                    size_hint: 0.17, 0.3
                    pos_hint: {'x': 0.83, 'y': 0.35}
                    faction: c.HADSCH_HALLA
                    halign: 'right'
                    text_size: self.size[0]* 0.5, self.size[1]
                    

                Image:
                    id: img 
                    size_hint: 0.7, 0.7
                    allow_stretch: True
                    keep_ratio: True
                    source: f'{c.ASSETS_PATH}/empty.png'
                


<SetupWindow>:
    name: 'setup'    
    RelativeLayout:
        size: root.width, root.height
        id: setup_layout
        canvas.before:
            Color:
                hsv: (2/3), 0.96, 0.098
            Rectangle:
                size: self.size  
        Image:
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            source: f'{c.ASSETS_PATH}/galaxy_bg.png'
            size_hint: (None, None)
            size: (2004, 1536)
        GridLayout:
            pos_hint: {'center_x': 0.5, 'top': 0.9}
            size_hint_max_x: 450
            size_hint_max_y: 40
            cols: 2
            id: top_grid
            Label:
                text:'Lege die Ziele und Rundenbooster fest:'
                id: main_text
                bold: True
                font_size: 18
            Button:
                text: 'Zufall'
                id: random_button
                size_hint_max_x: 100
                on_release:
                    root.pick_random()
        GridLayout:
            id: specials_top
            pos_hint:{'center_x': 0.5, 'center_y': 0.5}
            size_hint:(0.8, 0.7)
            size_hint_max_x: 1024
            cols: 1
            GridLayout:
                cols: 2
                GridLayout:
                    cols: 7
                    id:grid_round_boosters
                    spacing: 5            
                GridLayout:
                    rows: 2
                    spacing: 5
                    id:grid_end_goals
            GridLayout:
                cols: 6
                spacing: 5
                id: grid_round_goals
                size_hint_max_x: 1024
                     
        Button:
            id: continue_button
            pos_hint: {'center_x': 0.5, 'top': 0.15}            
            size_hint_max_x: 300
            size_hint_max_y: 40
            text: 'Weiter zur Wahl des Volkes'
            disabled: True
            on_press: 
                root.switch_to_faction_setup()
             
<MapSetupWindow>:
    name: 'map_setup'
    on_touch_down:
        root.my_touch_down(args[1].pos)
    on_touch_up: 
        root.my_touch_up(args[1].pos)  
    GridLayout:
        cols: 1
        size: root.width, root.height
        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                texture: app.galaxy_texture 

        RelativeLayout:
            id: top_layout            
            size_hint_y: None
            height: 80
            row_default_height: 80
            row_force_default: True
            Label:
                id: top_text
                text: '[b][size=18sp]Modifiziert das Spielfeld: [/b][/size] \n (klicke auf einen Sektor, um ihn zu rotieren) \n (ziehe einen Sektor auf einen anderen, um sie zu tauschen)'
                size_hint_max_x: 0.25
                markup: True
                halign: 'center'
                pos_hint: {'x': 0.5, 'y': 0}
            Button:
                text: 'Sektoren neu anordnen'
                id: new_map
                size_hint: (None, None)
                height: 40
                width: 180
                pos_hint: {'center_x': 0.25, 'center_y': 0.5}
                
            Button:
                text: 'Karte speichern'
                id: continue
                size_hint: (None, None)
                height: 40
                width: 180
                pos_hint: {'center_x': 0.75, 'center_y': 0.5}
            
        Background:
            id: BackgroundMap
            source: f'{c.ASSETS_PATH}/galaxy.png'
            allow_stretch: True
            size: self.parent.size
            offset: [self.center_x - self.norm_image_size[0]/2, self.center_y - self.norm_image_size[1]/2]
            magnification: self.norm_image_size[0] / self.texture_size[0]  # Find out the factor by which the image is magnified/shrunk from its 'default' value.         
            

            RelativeLayout:
                pos: self.parent.offset
                size: self.parent.norm_image_size
                id: MapLayout

                SectorImage:
                    id: bottomrightsector
                    source: f'{c.ASSETS_PATH}/sectors/7.png'
                    pos_hint: {'x': 18/30.5, 'y': 0/13.5}          
                SectorImage:
                    id: midrightsector
                    source: f'{c.ASSETS_PATH}/sectors/6.png'
                    pos_hint: {'x': 22.5/30.5, 'y': 3.5/13.5}    
                SectorImage:
                    id: toprightsector
                    source: f'{c.ASSETS_PATH}/sectors/5.png'
                    pos_hint: {'x': 19.5/30.5, 'y': 7.5/13.5}  
                SectorImage:
                    id: topmidsector
                    source: f'{c.ASSETS_PATH}/sectors/1.png'
                    pos_hint: {'x': 12/30.5, 'y': 8/13.5}
                SectorImage:
                    id: midrightmidsector
                    source: f'{c.ASSETS_PATH}/sectors/3.png'
                    pos_hint: {'x': 15/30.5, 'y': 4/13.5}   
                SectorImage:
                    id: bottommidsector
                    source: f'{c.ASSETS_PATH}/sectors/4.png'
                    pos_hint: {'x': 10.5/30.5, 'y': 0.5/13.5}                
                SectorImage:
                    id: midleftmidsector
                    source: f'{c.ASSETS_PATH}/sectors/2.png'
                    pos_hint: {'x': 7.5/30.5, 'y': 4.5/13.5} 
                SectorImage:
                    id: topleftsector
                    source: f'{c.ASSETS_PATH}/sectors/10.png'
                    pos_hint: {'x': 4.5/30.5, 'y': 0.6296} 
                SectorImage:
                    id: midleftsector
                    source: f'{c.ASSETS_PATH}/sectors/9.png'
                    pos_hint: {'x': 0, 'y': 5/13.5}
                SectorImage:
                    id: bottomleftsector
                    source: f'{c.ASSETS_PATH}/sectors/8.png'
                    pos_hint: {'x': 3/30.5, 'y': 1/13.5}

<WaitingScreen>:
    name:'waiting'
    RelativeLayout:
        size: root.size
        pos: (0,0)
        canvas.before:
            Color:
                hsv: (2/3), 0.96, 0.098
            Rectangle:
                size: self.size
        Image:
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            source: f'{c.ASSETS_PATH}/galaxy_bg.png'
            size_hint: (None, None)
            size: (2004, 1536)
        GridLayout:
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: (None, None)
            size: (200, 280)
            cols: 1
            Label:
                id: main_text
                text: 'Warte bis alle Spieler sich eingeloggt haben \n'
                size_hint: (1, None)
                height: 80
                markup: True
                bold: True
                font_size: 18
                halign: 'center'
            StackLayout:                    
                id: list_players
                orientation: 'tb-lr'
                size_hint: (None, None)
                size: (200, 200)
                spacing: 0
                padding: 0                                                  
             

<LoginScreen>:
    name: 'login'
    username: username
    server_ip: server_ip
    on_enter:
        self.load_config()
    canvas.before:
        Color:
            rgb: 0,0,0
        Rectangle:
            size: self.size
            pos: self.pos
    

    RelativeLayout:
        size: root.width, root.height
        Image:
            source: f'{c.ASSETS_PATH}/StartSplash.jpg'
            allow_stretch: True
            keep_ratio: True
            size_hint:(None, None)
            size: (root.width, (2518/3065) * root.width)
            pos_hint: {'center_x': 0.5, 'top': 1}
        GridLayout:
            canvas.before:
                Color:
                    rgba: 0.1,0.1,0.1,0.85
                Rectangle:
                    pos: self.pos
                    size: self.size

            size_hint_max_x: 340
            size_hint_max_y: 130
            row_default_height: 30
            row_force_default: True
            spacing: [10, 10]
            padding: [0, 10]
            cols: 1
            pos_hint: {'center_x': 0.5, 'y': 0.1} 
                        
            GridLayout:  # Row 2.
                cols: 2
                Label:
                    size_hint_max_x: 160
                    text: 'Mein Name:'
                TextInput:
                    id: username
                    size_hint_max_x: 160
                    multiline: False
                    write_tab: False

            GridLayout:  # Row 3.
                cols: 2
                Label:
                    size_hint_max_x: 160
                    text: 'IP-Adresse des Servers:'
                TextInput:
                    id: server_ip
                    size_hint_max_x: 160
                    multiline: False
                    write_tab: False   
                    on_text_validate:
                        root.enter_login()             

            RelativeLayout:  # Row 5.
                Button:
                    id: btn
                    text: 'Weiter'
                    size_hint_max_x: 200
                    pos_hint:{'center_x': 0.5, 'top': 1, 'bottom':1}
                    on_press:                         
                        root.enter_login()  # Save IPs etc. if button gets pressed.                             



<FactionButton>:
    text_size: self.size
    background_color: 0, 0, 0, 0
    color: 1, 1, 1, 1
    outline_color: 0, 0, 0, 1
    outline_width: 2
    bold: True
    halign: 'center'
    font_size: 20
    text: ''
    on_press:
        self.choose_faction()
<HoverButton>:
    background_color: 0,0,0,0
<ImageButton@HoverButton>:
    source: f'{c.ASSETS_PATH}/empty.png'
    Image:
        source: root.source
        pos: root.pos
        size: root.size
        allow_stretch: True
<TechButton@Image>:
    offset: [self.center_x - self.norm_image_size[0]/2, self.center_y - self.norm_image_size[1]/2]
    HoverButton:
        pos: root.offset
        size: root.norm_image_size

<SectorImage>:
    allow_stretch: True
    size_hint: 0.2623,  0.3704


<YourTurnPopup>:
    on_dismiss: self.on_dismiss

<Board>:    
    GridLayout:           
        pos_hint: {'x': 0.2, 'top': 1}
        size_hint:(0.8, None)
        y: 140
        rows: 1
        spacing: 0
        padding: 10
        GridLayout:
            id:qic_layout
            size_hint: (None, 1)
            width: math.ceil((len(self.children) / 2)) * 60
            pos_hint: {'top': 0.9, 'center_x': 0.5}
            rows: 2
            spacing: 0
            padding: 0
            col_default_width: 60
            col_force_default: True
            row_default_height: 60
            row_force_default: True
        
        GridLayout:
            id: fed_layout
            rows: 1
            spacing: 0
            padding: 0
            size: (len(self.children) * 100, 120)
            col_default_width: 100
            col_force_default: True
            row_default_height: 120
            row_force_default: True
    StackLayout:
        id:tech_layout
        pos_hint: {'y': 0, 'x':0}
        size_hint: (0.2, 0.85)
        orientation: 'tb-rl'

    RelativeLayout:
        id: board_grid
        pos_hint: {'y': 0, 'x':0.2}            
        size_hint: (None, None)
        size: ((self.parent.size[1] - 140) * 3483/2225, self.parent.size[1] - 140) if ((self.parent.size[1] - 140) * 3483/2225) < (0.8 - 110/self.parent.size[0]) * self.parent.size[0] else (self.parent.size[0] * (0.8 - 110/self.parent.size[0]), self.parent.size[0] * (0.8 - 110/self.parent.size[0]) * 2225/3483)             
    RelativeLayout:
        id: booster_layout
        pos_hint: {'y': 0.05, 'x': 1 - 110/self.parent.size[0] if ((self.parent.size[1] - 140) * 3483/2225) > (0.8 - 110/self.parent.size[0]) * self.parent.size[0] else 0.2 + ((self.parent.size[1] - 140) * 3483/2225) / self.parent.size[0]}
        size_hint: (None, None)
        size: (102, 298)
        Image:
            id: booster_img
            source: f'{c.ASSETS_PATH}/empty.png'
            size_hint: (1,1)
        HoverButton:
            id: booster_action
            hover_color: [0,0,0,0]
            pos_hint: {'x': 19/102, 'y': 187/298}
            size_hint: (63/102, 56/298)
            on_release: root.booster_action()
        Image:
            id: boo_oct
            source: f'{c.ASSETS_PATH}/empty.png'
            pos_hint: {'x': 19/102, 'y': 187/298}
            size_hint: (63/102, 56/298)
        HoverButton:
            id: finish_button
            hover_color: [0,0,0,0]
            pos_hint: {'x': 0, 'y': 0}
            size_hint: (1, 45/298)
            on_enter: root.flip_booster()
            on_leave: root.flip_back_booster()
            on_release: root.finish_round()


<FactionBoard>:
    id:faction_board
    RelativeLayout:
        size: self.parent.size
        pos: (0,0)
        Background:
            id: Background
            source: f'{c.ASSETS_PATH}/factions/FactionBoard.png'
            allow_stretch: True
            size: self.parent.size            
            offset: [self.center_x - self.norm_image_size[0]/2, self.center_y - self.norm_image_size[1]/2]
            magnification: self.norm_image_size[0] / self.texture_size[0]  # Find out the factor by which the image is magnified/shrunk from its 'default' value.         

            RelativeLayout:
                pos: self.parent.offset
                size: self.parent.norm_image_size
                id: board_layout 
                Image:
                    id: faction_octagon
                    source: f'{c.ASSETS_PATH}/empty.png'
                    size_hint: (0,0)
                    allow_stretch: True
                    keep_ratio: False
                Image:
                    id: ac_octagon
                    source: f'{c.ASSETS_PATH}/empty.png'
                    pos_hint: {'x': 2135/3483, 'y': 893/2225}
                    size_hint: (186/3483, 175/2225)
                    allow_stretch: True                          
                HoverButton:
                    id: pwr2qic
                    action_type: c.PWR_TO_QIC
                    size_hint: 222/3483, 157/2225
                    pos_hint: {'x': 3057/3483, 'y': 917/2225}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    on_release: root.free_action(self.action_type)
                
                HoverButton:
                    id: pwr2ore
                    action_type: c.PWR_TO_ORE
                    size_hint: 222/3483, 157/2225
                    pos_hint: {'x': 3057/3483, 'y': 722/2225}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    on_release: root.free_action(self.action_type)
                
                HoverButton:
                    id: pwr2knw
                    action_type: c.PWR_TO_KNW
                    size_hint: 222/3483, 157/2225
                    pos_hint: {'x': 3057/3483, 'y': 569/2225}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    on_release: root.free_action(self.action_type)

                HoverButton:
                    id: knw2gld
                    action_type: c.KNW_TO_GLD
                    size_hint: 102/3483, 170/2225
                    pos_hint: {'x': 3284/3483, 'y': 507/2225}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    on_release: root.free_action(self.action_type)
                
                HoverButton:
                    id: pwr2gld
                    action_type: c.PWR_TO_GLD
                    size_hint: 222/3483, 157/2225
                    pos_hint: {'x': 3057/3483, 'y': 395/2225}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    on_release: root.free_action(self.action_type)
                
                HoverButton:
                    id: ore2gld                    
                    action_type: c.ORE_TO_GLD
                    size_hint: 222/3483, 157/2225
                    pos_hint: {'x': 3057/3483, 'y': 239/2225}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    on_release: root.free_action(self.action_type)
                
                HoverButton:
                    id: ore2pst
                    action_type: c.ORE_TO_PST
                    size_hint: 222/3483, 157/2225
                    pos_hint: {'x': 3057/3483, 'y': 70/2225}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    on_release: root.free_action(self.action_type)
                
                HoverButton:
                    id: qic2rng
                    action_type: c.QIC_TO_RNG
                    size_hint: 150/3483, 205/2225
                    pos_hint: {'x': 3255/3483, 'y': 1036/2225}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    on_release: root.free_action(self.action_type)

                HoverButton:
                    id: qic2ore
                    action_type: c.QIC_TO_ORE
                    size_hint: 102/3483, 170/2225
                    pos_hint: {'x': 3286/3483, 'y': 740/2225}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    on_release: root.free_action(self.action_type)
                
                HoverButton:
                    id: move3pwr
                    action_type: c.MOVE_PWR_3
                    size_hint: 246/3483, 270/2225
                    pos_hint: {'x': 1302/3483, 'y': 1728/2225}
                    background_normal: ''
                    background_color: 0, 0, 0, 0 
                    on_release: root.free_action(self.action_type)

                HoverButton:
                    id: orangeqic
                    hover_color: [0,0,0,0]
                    action_type: c.ORANGE_QIC
                    size_hint: 126/3483, 115/2225
                    pos_hint: {'x': 2142/3483, 'y': 921/2225}
                    background_normal: ''
                    background_color: 0, 0, 0, 0           
                
                Image:
                    id: ore
                    source: f'{c.ASSETS_PATH}/currencies/ore.png'
                    allow_stretch: True
                    size_hint: 149/3483, 131/2225
                    pos_hint: {'x':0.116, 'y': 0.898}
                Image:
                    id: knw
                    source: f'{c.ASSETS_PATH}/currencies/knw.png'
                    allow_stretch: True
                    size_hint: 155/3483, 139/2225
                    pos_hint: {'x':0.116, 'y': 0.894}
                Image:
                    id: gld1
                    source: f'{c.ASSETS_PATH}/currencies/gld.png'
                    allow_stretch: True
                    size_hint: 135/3483, 118/2225
                    pos_hint: {'x':0.116, 'y': 0.909}
                Image:
                    id: gld2
                    source: f'{c.ASSETS_PATH}/currencies/gld.png'
                    allow_stretch: True
                    size_hint: 135/3483, 118/2225
                    pos_hint: {'x':0.116, 'y': 0.924}
                Image:
                    id: pt_gaia
                    source: f'{c.ASSETS_PATH}/empty.png'
                    pos_hint: {'x': 174/3483, 'y': 1547/2225}
                    size_hint: (320/3483, 213/2225)
                Label:
                    id: pt_gaia_label
                    text: ''
                    bold: True
                    font_size: 24
                    pos_hint: {'x': 200/3483, 'y': 1570/2225}
                    halign: 'center'                    
                    size_hint: (112/3483, 89/2225)
                Image:
                    id: pt_1
                    source: f'{c.ASSETS_PATH}/empty.png'
                    size_hint: (320/3483, 213/2225)
                    pos_hint: {'x': 788/3483, 'y': 1353/2225}
                Label:
                    id: pt_1_label
                    text: ''
                    bold: True
                    font_size: 24
                    pos_hint: {'x': 814/3483, 'y': 1376/2225}
                    halign: 'center'                                      
                    size_hint: (112/3483, 89/2225)
                Image:
                    id: pt_2
                    source: f'{c.ASSETS_PATH}/empty.png'
                    size_hint: (320/3483, 213/2225)
                    pos_hint: {'x': 820/3483, 'y': 1743/2225}
                Label:
                    id: pt_2_label
                    text: ''
                    bold: True
                    font_size: 24
                    pos_hint: {'x': 846/3483, 'y': 1766/2225}
                    halign: 'center'                                      
                    size_hint: (112/3483, 89/2225)
                Image:
                    id: pt_3
                    source: f'{c.ASSETS_PATH}/empty.png'
                    size_hint: (320/3483, 213/2225)
                    pos_hint: {'x': 1544/3483, 'y': 1551/2225}
                Label:
                    id: pt_3_label
                    text: ''
                    bold: True
                    font_size: 24
                    pos_hint: {'x': 1570/3483, 'y': 1574/2225}
                    halign: 'center'                                    
                    size_hint: (112/3483, 89/2225)
                TranspLayout:
                    id: mine_layout
                    pos_hint: {'x':453/3483, 'y': 95/2225}
                    size_hint: (1361/3483, 167/2225)
                TranspLayout:
                    id: trs_layout
                    pos_hint: {'x': 452/3483, 'y': 463/2225}
                    size_hint: (653/3483, 220/2225)
                TranspLayout:
                    id: lab_layout
                    pos_hint: {'x': 1661/3483, 'y': 463/2225}
                    size_hint: (740/3483, 220/2225)
                RelativeLayout:
                    id: gfm_layout
                    pos_hint: {'x': 2702/3483, 'y': 1323/2225}
                    size_hint: (781/3483, 219/2225)
                TranspImage:
                    id: left_ac
                    pos_hint: {'x': 1711/3483, 'y': 860/2225}
                    size_hint: (242/3483, 350/2225)
                    allow_stretch: True
                    source: f'{c.ASSETS_PATH}/empty.png'
                TranspImage:
                    id: right_ac
                    pos_hint: {'x': 2104/3483, 'y': 860/2225}
                    size_hint: (242/3483, 350/2225)
                    allow_stretch: True
                    source: f'{c.ASSETS_PATH}/empty.png'
                TranspImage:
                    id: pli
                    pos_hint: {'x': 460/3483, 'y': 860/2225}
                    size_hint: (350/3483, 350/2225)
                    allow_stretch: True
                    source: f'{c.ASSETS_PATH}/empty.png'
                    

                    

            